version: '3.7'
services:
    simulator:
        image: carlasim/carla:0.9.13
        logging:
          options:
            max-size: "10m"
            max-file: "3"
        privileged: true
        environment:
            SDL_VIDEODRIVER: x11
            # SDL_VIDEODRIVER: offscreen
            # DISPLAY: ""

            DISPLAY: $DISPLAY
        ports:
            - "2000:2000"
            - "2001:2001"
            - "2002:2002"

        runtime: nvidia
        command: ./CarlaUE4.sh  -quality-level=Low -opengl -carla-rpc-port=2000
        volumes:
            - /tmp/.X11-unix:/tmp/.X11-unix:rw
            - /etc/localtime:/etc/localtime
            - /etc/timezone:/etc/timezone
        restart: always
